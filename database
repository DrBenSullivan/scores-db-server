//Set database credentials & define function to establish connection pool.
const mysql = require("mysql2");

const establishConnectionPool = (connectionError) => {
    mysql.createPool(connectionError, {
        host: "localhost",
        user: "root",
        password: "admin",
        database: "highscores",
        port: 3306,
        waitForConnections: true,
        connectionLimit: 10,
        maxIdle: 10,
        idleTimeout: 6000,
        queueLimit: 0,
    });
    if(connectionError){
        console.log(`Database connection failed: ${connectionError}`);
        return res.status(500).json( { error: `Database connection failed: ${connectionError}`});
    }
    console.log(`Connected to database`);
};

module.exports = establishConnectionPool;